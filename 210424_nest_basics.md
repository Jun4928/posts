# Nest.js behind the curtain

[Nest.js](https://docs.nestjs.com/) 는 정말 견고한 소프트웨어다. SPA 프레임워크인 Angular와 대규모의 안정적인 서비스 운용에 사용되는 Java Spring의 철학을 공유하고 있다고 알고있다. 문서화도 정말 잘되어있어서 원하는 인터페이스(RESTful, GraphQL)에 맞게 Nest를 사용하는 것은 어려운일이 아니다.

최근 채팅앱을 개발하며 Nest.js 공식문서와 각종 레퍼런스를 참고해 멋진 아키텍처를 가지는 백엔드 어플리케이션을 구현했다. 근데, 한참 신나게 개발을 하던 중에 이런 생각이 들었다. _'그래서, 내가 작성한 코드들이 어떻게 동작하는 것이지?'_ 일종의 위기감이었다. 프레임워크가 어떤 원리 또는 설계에 의해서 작동하는 것을 알지 못 하면, 누군가가 이걸 왜 쓰냐고 물었을 때 경험밖에 이야기 할게 없다. 물론 경험 자체를 나누는 것이 나쁘지 않지만, 원리를 아는 것은 경험의 깊이를 더욱 깊게 해 준다.

Nest.js 공식문서를 읽다보면 아래와 같은 용어들을 마주하게 된다.

- IoC(Inversion of Control)
- Dependency Injection, Injectable
- Module
- Singleton Pattern
- Factory Pattern
- Strategy Pattern
- Lifecycle
- etc...

Nest.js 프레임워크의 주요 핵심 개념들인데, 추상적인 개념들이라 각각의 개념들이 가지는 연관성과 예시를 통해 정리 해보려 한다.

## IoC

먼저 알아두어야 할 점은 프레임워크의 핵심은 IoC에 있다는 것이다. 한국말로 해석하면 **제어의 역전** 이 된다. 즉, 프레임워크에게 프로그래머 개인이 제어해야 할 영역을 맡기는 것이다. 프레임워크와 라이브러리를 나누는 기준이 되기도 하는데, 제어의 역전은 주도권이 누구에게 있느냐? 에 대한 차이다. 라이브러리는 내가 주도권을 가지고 각각의 의존성을 설계하고 능동적으로 사용한다. 반면에, 프레임워크는 내가 작성한 앱이 수동적으로 프레임워크에 의해 사용된다. (=제어권이 역전 된 것을 의미한다)

Nest.js 는 프레임워크다. 따라서 우리는 앱의 동작 방식을 Nest.js 에게 맡긴 셈이다.

## DI(Dependency Injection)

DI는 의존성 주입을 의미한다. 말 자체가 너무 어렵다. 하지만 개념은 간단하다.
